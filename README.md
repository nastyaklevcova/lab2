## Отчет по лабораторной работе № 2

#### № группы: `ПМ-2403`

#### Выполнил: `Клевцова Анастасия Эдуардовна`

#### Вариант: `10`

### Cодержание:

- [Постановка задачи](#1-постановка-задачи)
- [Входные и выходные данные](#2-входные-и-выходные-данные)
- [Выбор структуры данных](#3-выбор-структуры-данных)
- [Алгоритм](#4-алгоритм)
- [Программа](#5-программа)
- [Анализ правильности решения](#6-анализ-правильности-решения)

### 1. Постановка задачи
>Задача состоит в том, чтобы обработать одномерный массив целых чисел и выполнить несколько операций с ним, таких как сортировка, поиск чисел, которые являются квадратами или кубами, а также замену элементов массива.
Задачу можно разбить на несколько этапов:

- Считать с консоли число `N`, а затем `N` целых чисел и заполнить массив.
- Разместить числа в массиве так, чтобы сначала шли числа, являющиеся квадратами целых чисел, в порядке возрастания, затем остальные числа в порядке убывания.
- Найти и вывести количество чисел в массиве, которые являются кубами целых чисел.
- Вывести элементы массива, заменяя числа, являющиеся квадратами, на их квадратные корни, остальные числа оставляются без изменений.
- Заменить каждое число в массиве на его факториал (если число неотрицательное) и вывести полученный массив.
### 2. Входные и выходные данные

#### Данные на вход
На вход программа должна получать сначала число количества элементов массива, а затем сами элементы массива в количестве первого введённого числа.
|                                        |        Тип         |
|----------------------------------------|--------------------|
| Число N (количество элементов массива) | Целое число        |
| Массив из N целых чисел                | Целые числа        |

#### Данные на выход
Программа должна вывести:
- Массив после перестановки, где сначала идут квадраты целых чисел, отсортированные по возрастанию, а затем остальные числа, отсортированные по убыванию.
- Количество чисел, являющихся кубами целых чисел.
- Массив с квадратами, заменёнными на их квадратные корни.
- Массив с факториалами всех чисел (для отрицательных чисел выводится "неопределено").

|                                                                                |        Тип         |
|--------------------------------------------------------------------------------|--------------------|
| Массив после перестановки                                                      | Целые числа        |
| Количество чисел, являющихся кубами                                            | Целое число        |
| Массив с квадратами, заменёнными на их квадратные корни, и с остальными числами | Целые числа        |
| Массив с факториалами всех чисел                                               | Целые числа        |

### 3. Выбор структуры данных
- Программа получает число N типа int и массив типа long[] с размерностью N для хранения больших чисел


|                      | название переменной                                  | Тип (в Java)   | 
|----------------------|------------------------------------------------------|--------------- |
| Массив               | originalArr ,squares, others ,mergedArray            |     long[]     |
| Результат(факториал) | result                                               | BigInteger     |
|                      |    num                                               |    long        |
|                      | n, i, sqrt, absN, cubeRoot, squaresCount,othersCount |      int       |

### 4. Алгоритм
#### Алгоритм выполнения программы:

1. **Считывание данных**
  - Считываем количество элементов массива N.
  - Считываем сами элементы массива.
2. **Разделение на квадраты целых чисел и остальные числа**
  - Массив квадратов целых чисел.
  - Массив других чисел.
3. **Сортировка чисел**
  - по возрастанию
  - по убыванию
4. **Объединение массивов**
5. **Подсчёт кубов**
  - Для каждого числа из исходного массива проверяем, является ли оно кубом целого числа.
  - Подсчитываем количество таких чисел.
4. **Замена квадратов на их квадратные корни**
5. **Вычисление факториалов и замена на них**
  - Каждое число заменяем на факториал
  - Если число отрицательное, выводим "неопределено".
  

#### Блок-схема
```mermaid
graph TD
    A([Начало]) --> B[/Ввод N/]
    B --> C[/Ввод arr/]
    C --> D{{int i=0, n-1, 1}}
    D --> E{Число-квадрат целого числа?}
    E -- Нет --> F[добавляем в массив не квадратов]
    E -- Да --> G[добавляем в массив квадратов]
    F --> D
    G --> D
    D --> H[Сортировка массива не квадратов по убыванию; сортирова массива квадратов по возрастанию;]
    H --> I[Объединение массивов]
    I --> J[/Вывод массива/]
    J --> W(Конец)
    C --> K{{int i=0, n-1, 1}}
    K --> L{Число-куб целого числа?}
    L -- Да --> M[Увеличение счетчика]
    L -- Нет --> K
    M --> K
    K --> N[/Вывод числа/]
    N --> W
    C --> O{{int i=0, n-1, 1}}
    O --> P{Число отрицательное?}
    P -- Да --> O
    P -- Нет --> Q[Замена числа на факториал]
    Q --> O
    O --> R[/Вывод массива/]
    R --> W
    C --> S{{int i=0, n-1, 1}}
    S --> T{Число отрицательное?}
    T -- Да --> U[Заменить число на его квадратный корень]
    T -- Нет --> S
    U --> S
    S --> V[/Вывод массива/]
    V --> W
```
### 5. Программа

```java
import java.util.*;
import java.math.BigInteger;

public class Main {

    // Функция для вычисления факториала
    public static BigInteger factorial(int n) {
        if (n < 0) throw new IllegalArgumentException("Факториал не определён для отрицательных чисел.");
        BigInteger result = BigInteger.ONE;
        for (int i = 2; i <= n; i++) {
            result = result.multiply(BigInteger.valueOf(i));
        }
        return result;
    }

    // Функция для проверки, является ли число квадратом целого числа
    public static boolean isPerfectSquare(int n) {
        if (n < 0) return false;
        int sqrt = (int) Math.sqrt(n);
        return sqrt * sqrt == n;
    }

    // Функция для проверки, является ли число кубом целого числа
    public static boolean isPerfectCube(int n) {
        int absN = Math.abs(n);
        int cubeRoot = (int) Math.cbrt(absN);
        return cubeRoot * cubeRoot * cubeRoot == absN;
    }

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);

        // Вводим размер массива
        System.out.print("Введите размер массива: ");
        int N = scanner.nextInt();
        long[] originalArr = new long[N];

        System.out.println("Введите элементы массива:");
        for (int i = 0; i < N; i++) {
            originalArr[i] = scanner.nextLong();
        }

        // Замена на факториалы для исходного массива
        System.out.println("Массив после замены на факториалы:");
        for (long num : originalArr) {
            if (num >= 0 && num <= 100) { // Ограничение для факториала
                BigInteger fact = factorial((int) num);
                System.out.print(fact + " ");
            } else {
                System.out.print(num + " "); // Если число вне диапазона, оставляем его без изменений
            }
        }
        System.out.println();

        // Создаем массивы для квадратов и остальных чисел
        int squaresCount = 0;
        int othersCount = 0;

        // Подсчитываем количество квадратов и других чисел
        for (long num : originalArr) {
            if (isPerfectSquare((int) num)) {
                squaresCount++;
            } else {
                othersCount++;
            }
        }

        // Массивы для квадратов и остальных чисел
        long[] squares = new long[squaresCount];
        long[] others = new long[othersCount];

        // Заполняем массивы
        int squareIndex = 0, otherIndex = 0;
        for (long num : originalArr) {
            if (isPerfectSquare((int) num)) {
                squares[squareIndex++] = num;  // Заполняем массив квадратов
            } else {
                others[otherIndex++] = num;  // Заполняем массив остальных чисел
            }
        }

        // Объединяем квадраты и остальные числа
        long[] mergedArray = new long[squaresCount + othersCount];
        System.arraycopy(squares, 0, mergedArray, 0, squaresCount);
        System.arraycopy(others, 0, mergedArray, squaresCount, othersCount);

        System.out.println("Объединённый массив:");
        for (long num : mergedArray) {
            System.out.print(num + " ");
        }
        System.out.println();

        // Подсчитываем количество кубов
        int cubeCount = 0;
        for (long num : mergedArray) {
            if (isPerfectCube((int) num)) {
                cubeCount++;
            }
        }
        System.out.println("Количество кубов: " + cubeCount);

        // Замена квадратов на корни
        System.out.println("Массив после замены квадратов на корни:");
        for (int i = 0; i < N; i++) {
            if (isPerfectSquare((int) originalArr[i])) {
                originalArr[i] = (long) Math.sqrt(originalArr[i]);
            }
            System.out.print(originalArr[i] + " ");
        }
        System.out.println();
    }
}
```
### 6. Анализ правильности решения
Программа работает корректно на всем множестве решений с учетом ограничений.

1. Тест №1:

    - **Input**:
        ```
        5
        9 23 16 44 -2
        ```

    - **Output**:
        ```
        Массив после замены на факториалы: 362880 25852016738884976640000 20922789888000 2658271574788448768043625811014615890319638528000000000 -2
        Объединённый массив: 9 16 23 44 -2
        Количество кубов: 0
        Массив после замены квадратов на корни:3 23 4 44 -2
        ```
2. Тест №2:

    - **Input**:
        ```
        5
        4 27 16 10 9
        ```

    - **Output**:
        ```
        Массив после замены на факториалы: 24 10888869450418352160768000000 20922789888000 3628800 362880
        Объединённый массив: 4 16 9 27 10
        Количество кубов: 1
        Массив после замены квадратов на корни: 2 27 4 10 3
        ```

